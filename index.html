<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Top-Down Shooter with Images</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: #111; overflow: hidden; font-family: sans-serif; color: #fff; }
  canvas { display: block; margin: 0 auto; background: #222; border: 2px solid #555; }
  #scoreboard { position: absolute; top: 10px; left: 10px; font-size: 20px; }
</style>
</head>
<body>
<div id="scoreboard">Score: 0 | Health: 100</div>
<canvas id="gameCanvas" width="800" height="600"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const keys = {};
document.addEventListener('keydown', e => keys[e.key.toLowerCase()] = true);
document.addEventListener('keyup', e => keys[e.key.toLowerCase()] = false);

// Load images from repository
const playerImg = new Image();
playerImg.src = 'andyside.jpg';

const enemyImgs = [
    'andyspin.jpg',
    'andyspin2.jpg',
    'andyspin3.jpg'
].map(src => {
    const img = new Image();
    img.src = src;
    return img;
});

class Player {
    constructor() {
        this.x = canvas.width/2;
        this.y = canvas.height/2;
        this.width = 50;
        this.height = 50;
        this.speed = 5;
        this.health = 100;
        this.bullets = [];
        this.shootCooldown = 0;
    }
    move() {
        if(keys['arrowup'] || keys['w']) this.y -= this.speed;
        if(keys['arrowdown'] || keys['s']) this.y += this.speed;
        if(keys['arrowleft'] || keys['a']) this.x -= this.speed;
        if(keys['arrowright'] || keys['d']) this.x += this.speed;
        this.x = Math.max(0, Math.min(canvas.width - this.width, this.x));
        this.y = Math.max(0, Math.min(canvas.height - this.height, this.y));
    }
    shoot() {
        if(this.shootCooldown <= 0) {
            this.bullets.push(new Bullet(this.x + this.width/2, this.y));
            this.shootCooldown = 10;
        }
    }
    update() {
        this.move();
        if(keys[' ']) this.shoot();
        if(this.shootCooldown > 0) this.shootCooldown--;
        this.bullets.forEach(b => b.update());
        this.bullets = this.bullets.filter(b => !b.offscreen());
    }
    draw() {
        ctx.drawImage(playerImg, this.x, this.y, this.width, this.height);
        this.bullets.forEach(b => b.draw());
    }
}

class Bullet {
    constructor(x, y) {
        this.x = x;
        this.y = y;
        this.radius = 5;
        this.speed = 8;
    }
    update() { this.y -= this.speed; }
    offscreen() { return this.y < 0; }
    draw() {
        ctx.fillStyle = '#ff0';
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2);
        ctx.fill();
    }
}

class Enemy {
    constructor() {
        this.width = 50;
        this.height = 50;
        this.x = Math.random() * (canvas.width - this.width);
        this.y = -this.height;
        this.speed = 1 + Math.random() * 2;
        this.img = enemyImgs[Math.floor(Math.random() * enemyImgs.length)];
    }
    update(player) {
        let angle = Math.atan2(player.y - this.y, player.x - this.x);
        this.x += Math.cos(angle) * this.speed;
        this.y += Math.sin(angle) * this.speed;
    }
    draw() { ctx.drawImage(this.img, this.x, this.y, this.width, this.height); }
}

let player = new Player();
let enemies = [];
let frameCount = 0;
let score = 0;

function detectCollisions() {
    enemies.forEach((e, i) => {
        let dx = (e.x + e.width/2) - (player.x + player.width/2);
        let dy = (e.y + e.height/2) - (player.y + player.height/2);
        let dist = Math.sqrt(dx*dx + dy*dy);
        if(dist < 40) { player.health -= 10; enemies.splice(i,1); }
        player.bullets.forEach((b,j)=>{
            let dx = (e.x + e.width/2) - b.x;
            let dy = (e.y + e.height/2) - b.y;
            if(Math.sqrt(dx*dx + dy*dy) < 25){ enemies.splice(i,1); player.bullets.splice(j,1); score += 10; }
        });
    });
}

function drawScore() {
    document.getElementById('scoreboard').textContent = `Score: ${score} | Health: ${player.health}`;
}

function gameLoop() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    frameCount++;
    if(frameCount % 60 === 0) enemies.push(new Enemy());

    player.update();
    player.draw();
    enemies.forEach(e => { e.update(player); e.draw(); });

    detectCollisions();
    drawScore();

    if(player.health > 0) requestAnimationFrame(gameLoop);
    else {
        ctx.fillStyle = '#fff';
        ctx.font = '50px sans-serif';
        ctx.fillText('GAME OVER', canvas.width/2 - 150, canvas.height/2);
    }
}

gameLoop();
</script>
</body>
</html>
